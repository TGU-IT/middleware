<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<configuration>
    <be.lettergen.log>
        <level>WARN</level>
        <pattern>%d{yyyy-MM-dd HH:mm:ss} %-7.7p - %m [%c]%n</pattern>
        <file-target>
            <file/>
            <maximum-file-size>10MB</maximum-file-size>
            <maximum-files>10</maximum-files> 
        </file-target>
        <loggers>
        </loggers>
    </be.lettergen.log>
	
	<be.lettergen.server>
		<port>15220</port>
		<broadcast>
			<enabled>true</enabled>
			<interval>5</interval>
			<primary>true</primary>
			<port>15221</port>
		</broadcast>
	</be.lettergen.server>
	
    <be.lettergen.modelstore>
        <spaces>
            <space name="ModelStore" stage="Development" directory="ms-dev" order="1" roles="repositoryrole,create" admin-roles="adminrole"/>
            <space name="ModelStore" stage="Test" directory="ms-test" order="2" roles="repositoryrole,create" admin-roles="adminrole"/>
            <space name="ModelStore" stage="Production" directory="ms-prod" order="3" roles="repositoryrole,create" admin-roles="adminrole"/>
            <space name="PublishStore" stage="PublishProduction" directory="ms-pubprod" order="4" roles="repositoryrole,create" admin-roles="adminrole" ispublishstore="true">
				<description>
					<translation lang_iso="nl-BE">Published Modellen</translation>
					<translation lang_iso="en-GB">Published Models</translation>
					<translation lang_iso="en-US">Published Models</translation>
					<translation lang_iso="fr-BE">Published Mod√®les</translation>
					<translation lang_iso="pt-PT">Published Modelo</translation>
				</description>
			</space>
			
		</spaces>
        <directory></directory>
        <base-uri></base-uri>
    </be.lettergen.modelstore>
	
	<be.lettergen.security>
		<realms>
			<realm>
				<Name>be.lettergen.security.shiro.xml.XMLRealm</Name>
				<refreshTimeOut></refreshTimeOut>
				<file></file>
			</realm>
			<!--
			<realm>
				<Name>be.lettergen.security.shiro.realm.ldap.ExtendedJndiLdapRealm</Name>
				<contextFactory.url>ldap://ldap.server:389/</contextFactory.url>
				<contextFactory.systemUsername>USER-NAME@DOMAIN.COM</contextFactory.systemUsername>
				<contextFactory.systemPassword>XXXX</contextFactory.systemPassword>
				<userDnTemplate>{0}@DOMAIN.COM</userDnTemplate>
				<groupSearchBase>OU=Users;DC=DOMAIN;DC=COM</groupSearchBase>
				<groupSearchFilter>(member={0})</groupSearchFilter>
				<groupRoleAttribute>cn</groupRoleAttribute>
				<userSearchBase>DC=DOMAIN;DC=COM</userSearchBase>
				<userSearchFilter>(userPrincipalName={0})</userSearchFilter>
				<userSearchAttribute>cn</userSearchAttribute>
				<searchSubtree>true</searchSubtree>
			</realm>
			-->
			<realm>
				<Name>be.lettergen.security.shiro.realm.idp.ExtendedBearerRealm</Name>
				<defaultRole>TEST</defaultRole>
				<defaultUserPrincipal>TEST</defaultUserPrincipal>
			</realm>
		</realms>
		<cacheManager>$connectiveSecurityCacheManager</cacheManager>
		<cache>
			<enabled>true</enabled>
			<max-elements-in-memory>1000</max-elements-in-memory>
			<eternal>false</eternal>
			<time-to-live-seconds>3600</time-to-live-seconds>
			<time-to-idle-seconds>1800</time-to-idle-seconds>
			<overflow-to-disk>false</overflow-to-disk>
			<disk-persistent>false</disk-persistent>
			<disk-expiry-thread-interval-seconds>600</disk-expiry-thread-interval-seconds>
		</cache>
	</be.lettergen.security>
	
    <be.lettergen.ooo>
        <connectionProtocol>pipe</connectionProtocol>
        <portNumbers>2002, 2003</portNumbers>
        <pipeNames>lg-office1, lg-office2</pipeNames>
        <workDir></workDir>
        <taskQueueTimeout>30000</taskQueueTimeout>
        <taskExecutionTimeout>120000</taskExecutionTimeout>
        <maxTasksPerProcess>100</maxTasksPerProcess>
        <retryTimeout>120000</retryTimeout>
        <retryInterval>250</retryInterval>
        <useLongOptions>false</useLongOptions>
    </be.lettergen.ooo>
    <be.lettergen.generator>
        <cache>
        </cache>
    </be.lettergen.generator>
    
    <!--<be.lettergen.letterdata.services>
		Refer LetterData documentation for LetterData service config.
	<be.lettergen.letterdata.services> -->
	
	<eu.connective.counters>
		<!-- #Specific Database Properties for counters -->
		<database-properties>
			<retry-attempts>3</retry-attempts>
			<retry-idletime>30000</retry-idletime>		
		</database-properties>
		<!-- #Configuration for user counters -->
		<user-counters>
			<enabled>true</enabled>
		</user-counters>
		<!-- #Configuration for document counters -->
		<document-counters>
			<enabled>true</enabled>
		</document-counters>
	</eu.connective.counters>
	
	<eu.connective.hibernate>
		<connection-url>jdbc:sqlserver://localhost:1433;sendStringParametersAsUnicode=false;</connection-url>
		<!-- Default master database name: SD_Master -->
		<master-database-name>sd_master</master-database-name>
		<username>sa</username>
		<password>12345</password>
		<maxPoolSize>100</maxPoolSize>
	</eu.connective.hibernate>
	
	<eu.connective.amqp>
		<broker>failover:(amqp://localhost:5672?amqp.idleTimeout=60000)?jms.prefetchPolicy.queuePrefetch=0&amp;jms.forceAsyncAcks=true</broker>
		<username>admin</username>
		<password>admin</password>
		<queue-names>
			<normal>SD_IN</normal>
			<high>SD_IN_HIGH</high>
			<error>SD_ERROR</error>
			<worker>SD_WORKER</worker>
		</queue-names>
		<!-- Maximum message file size in bytes -->
		<filesize>
			<!-- 0.9MB -->
			<request-data>200000</request-data>
			<!-- 50KB -->
			<flow-data>51200</flow-data>
		</filesize>
	</eu.connective.amqp>

	<eu.connective.worker.executor>
		<!-- Worker thread count -->
		<threads>
			<normal>4</normal>
			<high>1</high>
			<worker>4</worker>
		</threads>
	</eu.connective.worker.executor>
	
	<eu.connective.request.document>
		<!-- 
			The base URI for this DocStore. If this is not filled in, default workspace folder will be considered.
			* This base URI should be specified in the Flow Configuration('DOCSTORE_BASEURI') which is used in the Worker.
		-->
		<base-uri>C:\Users\ahm\LetterGen-0.0\docstore</base-uri>
	</eu.connective.request.document>
	
	<eu.connective.worker>
		<flows>
			<!-- Worker flow files in the SERVER_WORKSPACE_FOLDER/flow -->
			<flow file="generator-pdf.xml"/>
			<flow file="generator-odt.xml"/>
			<flow file="generator-doc.xml"/>
			<flow file="generator-docx.xml"/>
		</flows>
	</eu.connective.worker>
	
	<eu.connective.cleanup>
		<!-- The data before the specified days will be automatically removed/deleted from Tenants Database and DocStore. 
			Default: 14 days
		-->
		<cleanup-days>14</cleanup-days>
	</eu.connective.cleanup>
	
	<eu.connective.client.api>
		<writer-base-uri>http://localhost:15220/writerapi/v2</writer-base-uri>
		<clients>
			<TenantConfig>
				<idpType>idp</idpType> 
				<authEndpoint>https://login.microsoftonline.com/75c96405-09de-41f7-a7f6-9b062595eef9/oauth2/v2.0/authorize</authEndpoint> 
				<tokenEndpoint>https://login.microsoftonline.com/75c96405-09de-41f7-a7f6-9b062595eef9/oauth2/v2.0/token</tokenEndpoint>
				<wkEndpoint>https://login.microsoftonline.com/75c96405-09de-41f7-a7f6-9b062595eef9/.well-known/openid-configuration</wkEndpoint>
				<jwksEndpoint>https://login.microsoftonline.com/75c96405-09de-41f7-a7f6-9b062595eef9/discovery/v2.0/keys</jwksEndpoint>
				<userinfoEndpoint>https://graph.microsoft.com/oidc/userinfo</userinfoEndpoint>
				<clientId>a8af7d24-33b8-46ac-ac82-c7be712994ee</clientId>
				<tenantId>75c96405-09de-41f7-a7f6-9b062595eef9</tenantId>
				<userPrincipalClaim>name</userPrincipalClaim>
				<roleClaim>roles</roleClaim>
				<firstNameClaim>given_name</firstNameClaim>
				<lastNameClaim>family_name</lastNameClaim>
				<defaultScopes>
					<scope>openid</scope>
					<scope>profile</scope> 
					<scope>email</scope>
					<scope>offline_access</scope>
					<scope>api://a8af7d24-33b8-46ac-ac82-c7be712994ee/.default</scope>
				</defaultScopes> 
			</TenantConfig>
			<client xTenant="Tgu-Tenant" dbName="sd_tenant"  roles="adminrole"
			connection-url="jdbc:sqlserver://localhost:1433" username="sa" password="12345" minPoolSize="3" maxPoolSize="20" testConnectionOnCheckout="true">
				<TenantConfig>
					<idpType>ldap</idpType> 
				</TenantConfig>
				<permissions>				
					<role name="adminrole">
						<permission>CREATE</permission>
						<permission>DELETE</permission>
						<permission>STATUS</permission>
						<permission>DOCUMENT</permission>
						<permission>MODEL</permission>
						<permission>EMAILMODEL</permission>
						<permission>MODELLIST</permission>
						<permission>EMAILMODELLIST</permission>
						<permission>TRANSLATIONS</permission>
						<permission>VERSION</permission>
					</role>
					<role name="createrole">
						<permission>CREATE</permission>
						<permission>DELETE</permission>
					</role>
					<role name="documentrole">
						<permission>DOCUMENT</permission>
						<permission>DOCUMENTLIST</permission>
					</role>
				</permissions>
			</client>
			<client xTenant="taher" dbName="sd_tenant"  roles="adminrole"
			connection-url="jdbc:sqlserver://localhost:1433" username="sa" password="12345" minPoolSize="3" maxPoolSize="20" testConnectionOnCheckout="true">
				<TenantConfig>
					<idpType>idp</idpType> 
					<authEndpoint>https://login.microsoftonline.com/75c96405-09de-41f7-a7f6-9b062595eef9/oauth2/v2.0/authorize</authEndpoint> 
					<tokenEndpoint>https://login.microsoftonline.com/75c96405-09de-41f7-a7f6-9b062595eef9/oauth2/v2.0/token</tokenEndpoint>
					<wkEndpoint>https://login.microsoftonline.com/75c96405-09de-41f7-a7f6-9b062595eef9/.well-known/openid-configuration</wkEndpoint>
					<jwksEndpoint>https://login.microsoftonline.com/75c96405-09de-41f7-a7f6-9b062595eef9/discovery/v2.0/keys</jwksEndpoint>
					<userinfoEndpoint>https://graph.microsoft.com/oidc/userinfo</userinfoEndpoint>
					<clientId>a8af7d24-33b8-46ac-ac82-c7be712994ee</clientId>
					<tenantId>75c96405-09de-41f7-a7f6-9b062595eef9</tenantId>
					<userPrincipalClaim>name</userPrincipalClaim>
					<roleClaim>roles</roleClaim>
					<firstNameClaim>given_name</firstNameClaim>
					<lastNameClaim>family_name</lastNameClaim>
					<defaultScopes>
						<scope>openid</scope>
						<scope>profile</scope> 
						<scope>email</scope>
						<scope>offline_access</scope>
						<scope>api://a8af7d24-33b8-46ac-ac82-c7be712994ee/.default</scope>
					</defaultScopes> 
				</TenantConfig>
				<permissions>				
					<role name="adminrole">
						<permission>CREATE</permission>
						<permission>DELETE</permission>
						<permission>STATUS</permission>
						<permission>DOCUMENT</permission>
						<permission>MODEL</permission>
						<permission>EMAILMODEL</permission>
						<permission>MODELLIST</permission>
						<permission>EMAILMODELLIST</permission>
						<permission>TRANSLATIONS</permission>
						<permission>VERSION</permission>
					</role>
					<role name="createrole">
						<permission>CREATE</permission>
						<permission>DELETE</permission>
					</role>
					<role name="documentrole">
						<permission>DOCUMENT</permission>
						<permission>DOCUMENTLIST</permission>
					</role>
					<role name="create">
						<permission>CREATE</permission>
						<permission>DELETE</permission>
						<permission>STATUS</permission>
						<permission>DOCUMENT</permission>
						<permission>MODEL</permission>
						<permission>EMAILMODEL</permission>
						<permission>MODELLIST</permission>
						<permission>EMAILMODELLIST</permission>
						<permission>TRANSLATIONS</permission>
						<permission>VERSION</permission>
					</role>
				</permissions>
			</client>
			<client xTenant="Test-Tenant" dbName="sd_tenant"  roles="adminrole"
			connection-url="jdbc:sqlserver://localhost:1433" username="sa" password="12345" minPoolSize="3" maxPoolSize="20" testConnectionOnCheckout="true">
				<TenantConfig>
					<idpType>ldap</idpType> 
				</TenantConfig>
				<permissions>				
					<role name="adminrole">
						<permission>CREATE</permission>
						<permission>DELETE</permission>
						<permission>STATUS</permission>
						<permission>DOCUMENT</permission>
						<permission>MODEL</permission>
						<permission>EMAILMODEL</permission>
						<permission>MODELLIST</permission>
						<permission>EMAILMODELLIST</permission>
						<permission>TRANSLATIONS</permission>
						<permission>VERSION</permission>
					</role>
					<role name="createrole">
						<permission>CREATE</permission>
						<permission>DELETE</permission>
					</role>
					<role name="documentrole">
						<permission>DOCUMENT</permission>
						<permission>DOCUMENTLIST</permission>
					</role>
				</permissions>
			</client>
		</clients>
	</eu.connective.client.api>
</configuration>